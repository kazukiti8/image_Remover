# Image Cleaner (イメージクリーナー)

[![ライセンス: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)

Image Cleaner は、不要な画像を効率的に整理・削除するためのGUIツールです。指定したフォルダ内のぼやけた画像、重複した画像、類似した画像を検出して表示し、ユーザーが簡単に確認・削除できるようにします。

(D:\image_Remover\スクリーンショット 2025-05-15 084047.png)

## 📝 概要

大量の画像コレクションを持っていると、知らず知らずのうちに似たような写真や、手ブレした写真、完全に同じ写真がストレージを圧迫していることがあります。Image Cleaner は、これらの不要な画像を特定する手間を省き、ディスクスペースを解放するのに役立ちます。

## ✨ 主な機能

* **直感的なGUI:** PyQtベースの使いやすいグラフィカルインターフェース。
* **ぼかし検出:** 画像の鮮明度を分析し、ぼやけた画像を検出します (Laplacian Variance法を使用)。
* **重複検出:** 画像の内容を比較し、完全に同一の画像を検出します (pHashアルゴリズムを使用)。
* **類似画像検出:** 似通った構図や内容の画像を検出します (ImageHashライブラリを利用したハッシュ比較)。
* **画像プレビュー:** 検出された画像をアプリケーション内で直接プレビュー可能。
* **結果のタブ表示:** ぼかし、重複、類似の各カテゴリごとに結果を整理して表示。
* **フォルダ選択:** 分析対象の画像フォルダを簡単に選択。
* **閾値調整:** 各検出アルゴリズムの感度（閾値）をユーザーが設定画面で調整可能。
* **キャッシュ機能:** 一度スキャンした画像の特徴をキャッシュし、次回以降のスキャンを高速化。
* **ファイル操作:** 選択した画像をゴミ箱へ移動、または直接削除。
* **テーマ変更:** ライトテーマとダークテーマをサポート (qdarkstyle利用)。

## 🛠️ 技術スタック / 要件

* Python 3.8 以上
* **GUI:**
    * QtPy (PyQt5 または PySide6 のラッパー)
    * qdarkstyle (ダークテーマ用)
* **画像処理・分析:**
    * Pillow (PIL)
    * scikit-image
    * ImageHash
    * OpenCV-python
* **その他:**
    * natsort (自然順ソート用)

これらの依存関係は、`requirements.txt` (または `setup.py`) に基づいてインストールされます。

## 🚀 インストール

1.  **リポジトリをクローン (またはZIPファイルをダウンロードして展開):**
    ```bash
    git clone [https://github.com/kazukiti8/image_remover.git](https://github.com/kazukiti8/image_remover.git)
    cd image_remover
    ```

2.  **仮想環境の作成と有効化 (推奨):**
    ```bash
    python -m venv venv
    # Windows
    venv\Scripts\activate
    # macOS/Linux
    source venv/bin/activate
    ```

3.  **依存関係のインストール:**
    プロジェクトのルートディレクトリ (リポジトリをクローンした `image_remover` フォルダ) で、以下のコマンドを実行します。
    ```bash
    pip install .
    ```
    または、`setup.py` を直接使用する場合:
    ```bash
    python setup.py install
    ```
    これにより、必要なライブラリがインストールされ、`image_cleaner` コマンドが利用可能になります。

## 🏃 利用方法

1.  **アプリケーションの起動:**
    インストール後、ターミナルまたはコマンドプロンプトで以下のコマンドを実行します。
    ```bash
    image_cleaner
    ```

2.  **フォルダの選択:**
    * アプリケーションが起動したら、「フォルダ選択」ボタンをクリックして、分析したい画像が含まれるフォルダを選択します。

3.  **スキャンの開始:**
    * フォルダを選択後、「スキャン開始」ボタンをクリックすると、画像の分析が始まります。
    * 進捗はプログレスバーで表示されます。大規模なフォルダの場合、時間がかかることがあります。

4.  **結果の確認:**
    * スキャンが完了すると、「ぼかし画像」「重複画像」「類似画像」の各タブに検出結果が表示されます。
    * リスト内の画像を選択すると、右側のプレビューエリアに画像が表示されます。
    * 重複・類似画像の場合は、関連する画像も一緒に表示され、比較しやすくなっています。

5.  **画像の削除:**
    * 削除したい画像を選択し、「選択した画像を削除」または「選択した画像をゴミ箱へ」ボタンをクリックします。
    * 設定で「ゴミ箱へ移動」が無効になっている場合は、直接削除されます。

## ⚙️ 設定

メニューバーの「設定」から、以下の項目を調整できます。

* **ぼかし検出の閾値:** 値が低いほど、わずかなぼけも検出しやすくなります。
* **類似画像検出の閾値:** 値が低いほど、より厳密に類似性を判定します（差が少ないものを類似とみなす）。
* **重複画像検出の閾値:** 通常は変更不要です（ハッシュ値が完全に一致する場合を重複とします）。
* **キャッシュ設定:** キャッシュの有効/無効、キャッシュのクリア。
* **テーマ:** 「ライト」または「ダーク」テーマを選択できます。
* **削除方法:** 画像を直接削除するか、ゴミ箱に移動するかを選択できます。

## 🔬 検出アルゴリズムについて (簡易説明)

* **ぼかし検出:** 画像のラプラシアン分散を計算します。分散が低いほど、画像はぼやけていると判断されます。
* **重複検出:** `imagehash.phash` (Perceptual Hash) を使用して各画像のハッシュ値を計算し、ハッシュ値が完全に一致するものを重複と判断します。
* **類似画像検出:** `imagehash` ライブラリのハッシュアルゴリズム（例: pHash, dHash）で得られたハッシュ値間のハミング距離を計算し、その距離が設定された閾値以下の場合に類似画像と判断します。

## 🤝 コントリビューション

バグ報告、機能提案、プルリクエストは歓迎します！開発に貢献したい場合は、以下の手順でお願いします。

1.  このリポジトリをフォークします。
2.  新しいブランチを作成します (`git checkout -b feature/AmazingFeature`)。
3.  変更をコミットします (`git commit -m 'Add some AmazingFeature'`)。
4.  ブランチにプッシュします (`git push origin feature/AmazingFeature`)。
5.  プルリクエストを作成します。

## 📜 ライセンス

このプロジェクトは MITライセンス の下で公開されています。詳細は `LICENSE` ファイルをご覧ください (リポジトリに LICENSE ファイルがない場合は、MIT License の標準的な文言に従います)。

---

この README が、Image Cleaner の利用や理解の一助となれば幸いです。
